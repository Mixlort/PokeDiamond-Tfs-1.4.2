
flys = {    -- somar 351 variável 1
    ["Moltres"] = {580, 2300}, -- moltres
    ["Mini Moltres"] = {1951, 2300}, -- moltres
    ["Articuno"] = {581, 2100}, -- artic
    ["Mini Articuno"] = {1954, 2100}, -- artic
    ["Zapdos"] = {575, 2600}, -- zapdos
    ["Mini Zapdos"] = {1952, 2600}, -- zapdos
    ["Mini Mewtwo"] = {1950, 2600}, -- zapdos
    ["Mew"] = {583, 2200}, -- 1000
    ["Mewtwo"] = {584, 2200},-- two
    ["Mega Mewtwo"] = {584, 2200},-- two
    ["Dragonite"] = {572, 1300},-- nite
    ["Pidgeot"] = {573, 900}, -- geot
    ["Fearow"] = {577, 800}, -- fearow
    ["Aerodactyl"] = {578, 1100}, -- aero
    ["Charizard"] = {1784, 1000}, -- chari
    ["Porygon"] = {667, 600}, -- porygon
    ["Shiny Dragonite"] = {1371, 1300},-- Shiny nite
    ["Shiny Pidgeot"] = {1347, 900}, -- Shiny geot
    ["Shiny Fearow"] = {1348, 800}, -- Shiny fearow          --alterado v1.5
    ["Shiny Charizard"] = {1694, 1000}, -- Shiny chari
    ["Porygon2"] = {999, 890}, -- 2
    ["Skarmory"] = {1702, 1000}, -- skarmory
    ["Crobat"] = {1003, 1190}, -- crobat
    ["Dragonair"] = {1463, 1150},
    ["Shiny Dragonair"] = {1464, 1400},
    ["Noctowl"] = {1345, 1000},
    ["Farfetch'd"] = {1471, 1000},  --alterado v1.8 \/
    ["Shiny Farfetch'd"] = {1472, 1000},
    ["Gengar"] = {1748, 1000},
    ["Shiny Gengar"] = {1756, 1000},
    ["Heracross"] = {1476, 1000},
    ["Xatu"] = {1473, 1000},
    ["Elder Charizard"] = {1694, 1000}, -- Elder chari
    ["Mega Charizard"] = {1694, 1000},
    ["Ancient Aerodactyl"] = {1732, 2300}, -- aero
    ["Zekrom"] = {2378, 2300}, -- Zek
    ["Salamence"] = {1777, 2300}, -- Mence
    ["Tropius"] = {1782, 2300}, -- Piuss
    ["Black Articuno"] = {1834, 3000}, -- Piuss
    ["Shiny Venomoth"] = {1907, 3000}, -- Piuss
    ["Shiny Togekiss"] = {2077, 3500}, -- Piuss
    ["Hydreigon"] = {2141, 3500}, -- Piuss
    ["Latios"] = {2145, 900}, -- laii
    ["Latios Underwater"] = {2156, 1900}, -- laii
    ["Latios Flamethrower"] = {2157, 1900}, -- laii
    ["Latios Darkwooder"] = {2155, 1900}, -- laii
    ["Latios Leaf Green"] = {2158, 1900}, -- laii
    ["Latias"] = {2144, 900}, -- laii
    ["Alpha Zekrom"] = {2250, 2900}, -- laii
    ["Ancient Aerodactyl"] = {1732, 2300}, -- aero
    ["Giratina Star"] = {2357, 2200}, -- aero
}
    
rides = {
    ["Girafarig"] = {1713, 800}, -- girafarig
    ["Tauros"] = {479, 580}, -- tauros
    ["Ninetales"] = {480, 800}, -- kyuubi
    ["Rapidash"] = {481, 800}, -- rapid
    ["Ponyta"] = {482, 410}, -- ponyta
    ["Rhyhorn"] = {483, 400}, -- rhyhorn
    ["Arcanine"] = {1688, 900}, -- arcan
    ["Onix"] = {477, 450}, -- onix
    ["Venusaur"] = {1691, 390}, -- venu
    ["Dodrio"] = {484, 750}, -- dodrio
    ["Doduo"] = {486, 420}, -- doduo
    ["Shiny Tauros"] = {1375, 580}, -- tauros
    ["Shiny Arcanine"] = {1716, 900}, -- arcan
    ["Shiny Onix"] = {477, 450}, -- onix             --alterado v1.5
    ["Shiny Venusaur"] = {1705, 390}, -- venu
    ["Shiny Onix"] = {644, 480}, -- cristal onix
    ["Steelix"] = {997, 750}, -- steelix
    ["Mega Steelix"] = {997, 750}, -- steelix
    ["Meganium"] = {1751, 720}, -- meganium
    ["Bayleef"] = {1037, 555}, -- bayleef
    ["Stantler"] = {1038, 595}, -- stantler
    ["Houndoom"] = {998, 820}, -- houndoom
    ["Piloswine"] = {1040, 450}, -- piloswine
    ["Mareep"] = {1039, 400}, -- marip
    ["Entei"] = {1536, 1190}, -- Entei
    ["Suicune"] = {1537, 1190}, -- Suicune
    ["Raikou"] = {1538, 1190}, -- Raikou
    ["Ancient Arcanine"] = {1716, 900}, -- arcani
    ["Shiny Ninetales"] = {1717, 1000}, -- Shiny Ninetales  --alterado v1.9 \/
    ["Shiny Dodrio"] = {1496, 750}, -- shiny dodrio
    ["Super Venusaur"] = {1705, 390}, -- super venu
    ["Aggron"] = {1775, 390}, -- agg
    ["Lairon"] = {1773, 390}, -- laii
    ["Heatran"] = {2148, 390}, -- laii
    ["Shiny Heatran"] = {2149, 1000}, -- laii
    ["Arch Heatran"] = {2150, 900}, -- laii
    
    ["Shiny Volcanion"] = {2146, 900}, -- laii
    ["Volcanion"] = {2147, 900}, -- laii
    ["Ancient Arcanine"] = {1716, 900}, -- arcani
    ["Terrakion"] = {2314, 900}, -- arcani
    ["Solgaleo"] = {2356, 900}, -- arcani
    ["Shiny Solgaleo"] = {2355, 900}, -- arcani
    ["Ultra Solgaleo"] = {2354, 900}, -- arcani
}
    
surfs = {
    ["Poliwag"] = {lookType=629, speed = 320},
    ["Poliwhirl"] = {lookType=488, speed = 480},
    ["Seaking"] = {lookType=620, speed = 520},
    ["Dewgong"] = {lookType=534, speed = 700},
    ["Blastoise"] = {lookType=1727, speed = 850},
    ["Tentacruel"] = {lookType=536, speed = 750},
    ["Lapras"] = {lookType=537, speed = 960},
    ["Gyarados"] = {lookType=538, speed = 1050},
    ["Omastar"] = {lookType=539, speed = 680},
    ["Kabutops"] = {lookType=540, speed = 840},
    ["Poliwrath"] = {lookType=541, speed = 680},
    ["Vaporeon"] = {lookType=542, speed = 800},
    ["Staryu"] = {lookType=617, speed = 385},
    ["Starmie"] = {lookType=618, speed = 685},
    ["Goldeen"] = {lookType=619, speed = 355},
    ["Seadra"] = {lookType=621, speed = 655},
    ["Golduck"] = {lookType=622, speed = 760},
    ["Squirtle"] = {lookType=623, speed = 365},
    ["Wartortle"] = {lookType=1767, speed = 605},
    ["Tentacool"] = {lookType=628, speed = 340},
    ["Snorlax"] = {lookType=651, speed = 500},
    ----------------Shiny----------------------
    ["Shiny Blastoise"] = {lookType=1712, speed = 935},
    ["Shiny Tentacruel"] = {lookType=1365, speed = 825},
    ["Shiny Gyarados"] = {lookType=1381, speed = 1155},
    ["Shiny Vaporeon"] = {lookType=1383, speed = 880},        --alterado v1.6
    ["Shiny Seadra"] = {lookType=1376, speed = 720.5},
    ["Shiny Tentacool"] = {lookType=1364, speed = 374},
    ["Shiny Snorlax"] = {lookType=1386, speed = 550},
    ----------------Johto----------------------
    ["Mantine"] = {lookType=987, speed = 820},
    ["Totodile"] = {lookType=988, speed = 360},
    ["Croconow"] = {lookType=989, speed = 590},
    ["Feraligatr"] = {lookType=1790, speed = 900},
    ["Marill"] = {lookType=990, speed = 340},
    ["Azumarill"] = {lookType=993, speed = 680},
    ["Quagsire"] = {lookType=994, speed = 740},
    ["Kingdra"] = {lookType=995, speed = 1020},
    ["Octillery"] = {lookType=992, speed = 600},
    ["Wooper"] = {lookType=991, speed = 315},
    ["Ancient Blastoise"] = {lookType=1712, speed = 1199},
    ["Small Snorlax"] = {lookType=651, speed = 700},
    ["Black Kyogre"] = {lookType=2164, speed = 1700},
    ["Shiny Kyogre"] = {lookType=2174, speed = 1700},
    ["Ancient Blastoise"] = {lookType=1712, speed = 1199},
}

blockedTiles = {459, 493, 4608, 4609, 4610, 4611, 4612, 4613, 4614, 4615, 4616, 4617, 4618, 4619, 4620, 4621, 4622, 4623, 4624, 4625, 4820, 4821, 4822, 4823, 4824, 4825, }

cutItems = {
	[2767] = 6219,
	[2768] = 6219,
}

rockSmashItems = {
	[1285] = 1336,
}

digItems = {
	[468] = 469,
	[481] = 482,
	[483] = 484,
	[7932] = 7933,
	[8579] = 8585,
}

surfItems = {
	[4644] = {x = 0, y = -1}, -- NORTH
	[4645] = {x = 1, y = 0}, -- EAST
	[4646] = {x = 0, y = 1}, -- SOUTH
	[4647] = {x = -1, y = 0}, -- WEST
	[4648] = {x = -1, y = -1}, -- NORTHWEST
	[4649] = {x = 1, y = -1}, -- NORTHEAST
	[4650] = {x = -1, y = 1}, -- SOUTHWEST
	[4651] = {x = 1, y = 1}, -- SOUTHEAST
	[4652] = {x = -1, y = -1}, -- NORTHWEST
	[4653] = {x = 1, y = -1}, -- NORTHEAST
	[4654] = {x = -1, y = 1}, -- SOUTHWEST
	[4655] = {x = 1, y = 1}, -- SOUTHEAST
	[6630] = {x = -1, y = 0}, -- WEST
	[6628] = {x = 1, y = 0},  -- EAST
	[6629] = {x = 0, y = 1},  -- SOUTH
	[6627] = {x = 0, y = -1}, -- NORTH
}

function Player.setSurfing(self, bool)
    if bool and bool == 1 then
        self:setStorageValue(storageSurf, 1)
    else
        self:setStorageValue(storageSurf, -1)
    end
end

function Player.isSurfing(self)
    return self:getStorageValue(storageSurf) == 1
end

function Player.setRiding(self, bool)
    if bool and bool == 1 then
        self:setStorageValue(storageRide, 1)
    else
        self:setStorageValue(storageRide, -1)
    end
end

function Player.isRiding(self)
    return self:getStorageValue(storageRide) == 1
end

function Player.setFlying(self, bool)
    if bool and bool == 1 then
        self:setStorageValue(storageFly, 1)
    else
        self:setStorageValue(storageFly, -1)
    end
end

function Player.isFlying(self)
    return self:getStorageValue(storageFly) == 1
end

function Item.setAbilityCd(self, ability, time)
    if not self:isItem() then return false end
    self:setSpecialAttribute(ability, ((time * 60) + os.time()))
    return true
end

function Item.getAbilityCd(self, ability)
    if not self:isItem() then return false end
    local atribute = self:getSpecialAttribute(ability)
    if atribute and atribute - os.time() > 0 then 
        return atribute - os.time()
    else
        return 0
    end
end

function Player.addAbility(player, ball, ability, teleportPos)
    if not player or not player:isPlayer() then return false end
    if not ball or not ball:isItem() then return false end
    local pokeName = ball:getPokeName()
    local monsterType = MonsterType(pokeName)
    local outfit, speed
    if ability == "surf" then
        if teleportPos then player:teleportTo(teleportPos) end
        local tileUnder = Tile(player:getPosition())
        local groundUnder = tileUnder:getGround()
        if not isInArray(waterIds, groundUnder:getId()) then
            player:setSurfing()
            player:teleportTo(player:getTown():getTemplePosition())
            player:changeSpeed(player:getBaseSpeed()-player:getSpeed())
            transformBallItem(ball, STATUS_BALL_NORMAL)
            player:setStorageValue(storageGoback, -1)
            return true
        end
        player:setSurfing(1)
        speed = 300 + surfs[pokeName].speed * 5
        outfit = surfs[pokeName].lookType
    elseif ability == "ride" then
        player:setRiding(1)
        speed = 300 + rides[pokeName][2] * 5
        outfit = rides[pokeName][1] 
    elseif ability == "fly" then
        player:setFlying(1)
        speed = 300 + flys[pokeName][2] * 5
        outfit = flys[pokeName][1] 
    end
    if not outfit then return false end
    if not speed then print("poke sem speed no surf:"..pokeName) return false end
    transformBallItem(ball, STATUS_BALL_USE)
    player:setStorageValue(storageGoback, 1)
    speed = speed
    player:changeSpeed(speed)
    doSetCreatureOutfit(player, {lookType=outfit}, -1)
    if player:getSummon() then
        player:getSummon():remove()
    end
    return true
end

function Player.removeAbility(player, ball, ability, toPosition, target)
    if not player or not player:isPlayer() then return false end
    if not ball or not ball:isItem() then return false end
    local toPosition = toPosition or player:getPosition()
    local ballName = ball:getPokeName()
    local newPos = toPosition
    if ability == "surf" then
        if getDistanceBetween(player:getPosition(), toPosition) > 1 then
            player:sendCancelMessage("You're too far to stop surfing.")
            return true
        end	
        if target then
            newPos = {x=toPosition.x-surfItems[target:getId()].x, y=toPosition.y-surfItems[target:getId()].y, z=toPosition.z}
            if getTileThingByPos(newPos) == 0 or getTileInfo(newPos).house then
                player:sendCancelMessage("You can't go there.")
                return true
            end
            player:teleportTo(newPos)
        end
        player:setSurfing()
        player:say(ballName..", i'm tired of surfing!", TALKTYPE_ORANGE_1)
    elseif ability == "ride" then
        player:setRiding()
        player:say(ballName..", i'm tired of riding!", TALKTYPE_ORANGE_1)
    elseif ability == "fly" then
        local pos = player:getPosition()
        local tileUnder = Tile({x=pos.x, y=pos.y, z=pos.z, stackpos=0})
        local groundUnder = tileUnder:getGround()
        if not tileUnder or not groundUnder then return false end
        if isInArray(blockedTiles, groundUnder:getId()) then
            player:sendCancelMessage("You can't get off your pokemon here.")
            return true
        end
        player:setFlying()
        player:say(ballName..", i'm tired of flying!", TALKTYPE_ORANGE_1)
    end
    player:removeCondition(CONDITION_OUTFIT)
    player:changeSpeed(player:getBaseSpeed()-player:getSpeed())
    doReleaseSummon(player:getId(), player:getPosition(), false, false)
    return true
end
